"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.sample_res = exports.sample_req = exports.initial = void 0;
exports.endpoint = endpoint;
exports.get = get;
const helpers_1 = require("./helpers");
const config_1 = require("./config");
const client_1 = require("./client");
// ================================================== //
// ==================== Endpoint ==================== //
// ================================================== //
exports.initial = {
    tframe: 'Year',
    until: 'max',
    asc: false,
};
function endpoint({ TICKER }, query) {
    return helpers_1.builder.stringify([config_1.config.baseUrl, 'market-aggregation', TICKER], query);
}
function get(params_1) {
    return __awaiter(this, arguments, void 0, function* (params, query = exports.initial) {
        return yield (0, client_1.client)(endpoint(params, query))
            .then(x => x.json())
            .catch(() => []);
    });
}
// ================================================ //
// ==================== Sample ==================== //
// ================================================ //
exports.sample_req = 'https://project-finance-backend.onrender.com/market-aggregation/MSFT?tframe=Year&until=max&asc=false';
exports.sample_res = [
    {
        "Date": "2025-01-31T00:00:00",
        "Adj Close": 396.195556640625,
        "Open": 374.6499938964844,
        "High": 419.30999755859375,
        "Low": 344.7900085449219,
        "Close": 396.989990234375,
        "Volume": 1435703162
    },
    {
        "Date": "2024-01-31T00:00:00",
        "Adj Close": 409.7481994628906,
        "Open": 425.5299987792969,
        "High": 468.3500061035156,
        "Low": 385.5799865722656,
        "Close": 413.6400146484375,
        "Volume": 5122296000
    },
    {
        "Date": "2023-01-31T00:00:00",
        "Adj Close": 244.9017791748047,
        "Open": 373.8599853515625,
        "High": 415.32000732421875,
        "Low": 245.47000122070312,
        "Close": 249.4199981689453,
        "Volume": 6781120800
    },
    {
        "Date": "2022-01-31T00:00:00",
        "Adj Close": 290.65399169921875,
        "Open": 243.0800018310547,
        "High": 315.95001220703125,
        "Low": 213.42999267578125,
        "Close": 298.7900085449219,
        "Volume": 7554686400
    },
    {
        "Date": "2021-01-31T00:00:00",
        "Adj Close": 224.17320251464844,
        "Open": 335.3500061035156,
        "High": 349.6700134277344,
        "Low": 224.25999450683594,
        "Close": 232.3800048828125,
        "Volume": 6854734200
    },
    {
        "Date": "2020-01-31T00:00:00",
        "Adj Close": 154.65008544921875,
        "Open": 222.52999877929688,
        "High": 242.63999938964844,
        "Low": 132.52000427246094,
        "Close": 162.00999450683594,
        "Volume": 9617423300
    },
    {
        "Date": "2019-01-31T00:00:00",
        "Adj Close": 105.3824462890625,
        "Open": 158.77999877929688,
        "High": 174.0500030517578,
        "Low": 102.3499984741211,
        "Close": 112.02999877929688,
        "Volume": 6038727700
    },
    {
        "Date": "2018-01-31T00:00:00",
        "Adj Close": 86.70499420166016,
        "Open": 99.55000305175781,
        "High": 116.18000030517578,
        "Low": 83.83000183105469,
        "Close": 93.7699966430664,
        "Volume": 8069091800
    },
    {
        "Date": "2017-01-31T00:00:00",
        "Adj Close": 57.86738204956055,
        "Open": 86.12999725341797,
        "High": 95.44999694824219,
        "Low": 62.75,
        "Close": 63.97999954223633,
        "Volume": 5712283500
    },
    {
        "Date": "2016-01-31T00:00:00",
        "Adj Close": 44.7899055480957,
        "Open": 62.790000915527344,
        "High": 65.91000366210938,
        "Low": 48.040000915527344,
        "Close": 50.880001068115234,
        "Volume": 7385265600
    },
    {
        "Date": "2015-01-31T00:00:00",
        "Adj Close": 37.578338623046875,
        "Open": 54.31999969482422,
        "High": 56.849998474121094,
        "Low": 39.720001220703125,
        "Close": 43.849998474121094,
        "Volume": 9068403800
    },
    {
        "Date": "2014-01-31T00:00:00",
        "Adj Close": 31.95567512512207,
        "Open": 46.65999984741211,
        "High": 50.04999923706055,
        "Low": 35.689998626708984,
        "Close": 38.310001373291016,
        "Volume": 8388341200
    },
    {
        "Date": "2013-01-31T00:00:00",
        "Adj Close": 22.507854461669922,
        "Open": 37.349998474121094,
        "High": 38.97999954223633,
        "Low": 27.100000381469727,
        "Close": 27.799999237060547,
        "Volume": 12036269800
    },
    {
        "Date": "2012-01-31T00:00:00",
        "Adj Close": 24.991043090820312,
        "Open": 27.25,
        "High": 32.95000076293945,
        "Low": 26.260000228881836,
        "Close": 31.739999771118164,
        "Volume": 11774686400
    },
    {
        "Date": "2011-01-31T00:00:00",
        "Adj Close": 20.386615753173828,
        "Open": 26.549999237060547,
        "High": 29.950000762939453,
        "Low": 23.649999618530273,
        "Close": 26.579999923706055,
        "Volume": 15285881400
    },
    {
        "Date": "2010-01-31T00:00:00",
        "Adj Close": 21.54099464416504,
        "Open": 28.049999237060547,
        "High": 31.579999923706055,
        "Low": 22.729999542236328,
        "Close": 28.670000076293945,
        "Volume": 15894531800
    },
    {
        "Date": "2009-01-31T00:00:00",
        "Adj Close": 11.85612964630127,
        "Open": 30.6200008392334,
        "High": 31.5,
        "Low": 14.869999885559082,
        "Close": 16.149999618530273,
        "Volume": 15528267100
    },
    {
        "Date": "2008-01-31T00:00:00",
        "Adj Close": 19.606426239013672,
        "Open": 19.530000686645508,
        "High": 33.25,
        "Low": 16.75,
        "Close": 27.200000762939453,
        "Volume": 20909768000
    },
    {
        "Date": "2007-01-31T00:00:00",
        "Adj Close": 20.033443450927734,
        "Open": 35.790000915527344,
        "High": 37.5,
        "Low": 26.600000381469727,
        "Close": 28.170000076293945,
        "Volume": 16287479000
    },
    {
        "Date": "2006-01-31T00:00:00",
        "Adj Close": 18.8364200592041,
        "Open": 29.90999984741211,
        "High": 31.479999542236328,
        "Low": 21.459999084472656,
        "Close": 26.8700008392334,
        "Volume": 16768355000
    },
    {
        "Date": "2005-01-31T00:00:00",
        "Adj Close": 17.424911499023438,
        "Open": 26.25,
        "High": 28.3799991607666,
        "Low": 23.81999969482422,
        "Close": 25.15999984741211,
        "Volume": 16653559100
    },
    {
        "Date": "2004-01-31T00:00:00",
        "Adj Close": 16.436975479125977,
        "Open": 26.799999237060547,
        "High": 30.200000762939453,
        "Low": 24.010000228881836,
        "Close": 26.530000686645508,
        "Volume": 17121246000
    },
    {
        "Date": "2003-01-31T00:00:00",
        "Adj Close": 14.554898262023926,
        "Open": 27.579999923706055,
        "High": 30,
        "Low": 22.549999237060547,
        "Close": 23.700000762939453,
        "Volume": 15912337100
    },
    {
        "Date": "2002-01-31T00:00:00",
        "Adj Close": 17.914188385009766,
        "Open": 26.149999618530273,
        "High": 32.5,
        "Low": 20.704999923706055,
        "Close": 29.170000076293945,
        "Volume": 19738273200
    },
    {
        "Date": "2001-01-31T00:00:00",
        "Adj Close": 18.116851806640625,
        "Open": 33.32500076293945,
        "High": 38.07500076293945,
        "Low": 23.75,
        "Close": 29.5,
        "Volume": 18273522200
    },
    {
        "Date": "2000-01-31T00:00:00",
        "Adj Close": 27.443965911865234,
        "Open": 22.0625,
        "High": 57.5,
        "Low": 20.15625,
        "Close": 44.6875,
        "Volume": 20826499800
    },
    {
        "Date": "1999-01-31T00:00:00",
        "Adj Close": 23.0490779876709,
        "Open": 58.6875,
        "High": 59.96875,
        "Low": 35.99609375,
        "Close": 37.53125,
        "Volume": 14877184600
    },
    {
        "Date": "1998-01-31T00:00:00",
        "Adj Close": 13.011896133422852,
        "Open": 34.90234375,
        "High": 43.78125,
        "Low": 18.8125,
        "Close": 21.1875,
        "Volume": 15000916800
    },
    {
        "Date": "1997-01-31T00:00:00",
        "Adj Close": 7.4847187995910645,
        "Open": 16.203125,
        "High": 18.84375,
        "Low": 10.953125,
        "Close": 12.1875,
        "Volume": 16339582400
    },
    {
        "Date": "1996-01-31T00:00:00",
        "Adj Close": 3.7879395484924316,
        "Open": 10.390625,
        "High": 12.90625,
        "Low": 5.75,
        "Close": 6.167969226837158,
        "Volume": 17776198400
    },
    {
        "Date": "1995-01-31T00:00:00",
        "Adj Close": 2.418139696121216,
        "Open": 5.492187976837158,
        "High": 6.828125,
        "Low": 3.648437976837158,
        "Close": 3.9375,
        "Volume": 20210603200
    },
    {
        "Date": "1994-01-31T00:00:00",
        "Adj Close": 1.5833054780960083,
        "Open": 3.84375,
        "High": 4.078125,
        "Low": 2.4375,
        "Close": 2.578125,
        "Volume": 16873057600
    },
    {
        "Date": "1993-01-31T00:00:00",
        "Adj Close": 1.600098729133606,
        "Open": 2.515625,
        "High": 3.0625,
        "Low": 2.199218988418579,
        "Close": 2.605468988418579,
        "Volume": 16058652800
    },
    {
        "Date": "1992-01-31T00:00:00",
        "Adj Close": 1.580106496810913,
        "Open": 2.65625,
        "High": 2.96875,
        "Low": 2.046875,
        "Close": 2.5729169845581055,
        "Volume": 15439281600
    },
    {
        "Date": "1991-01-31T00:00:00",
        "Adj Close": 0.8849452137947083,
        "Open": 2.3072919845581055,
        "High": 2.7760419845581055,
        "Low": 1.2604169845581055,
        "Close": 1.4409719705581665,
        "Volume": 16387404000
    },
    {
        "Date": "1990-01-31T00:00:00",
        "Adj Close": 0.42114895582199097,
        "Open": 1.0416669845581055,
        "High": 1.381943941116333,
        "Low": 0.640625,
        "Close": 0.6857640147209167,
        "Volume": 18583437600
    },
    {
        "Date": "1989-01-31T00:00:00",
        "Adj Close": 0.2537551522254944,
        "Open": 0.6059030294418335,
        "High": 0.6666669845581055,
        "Low": 0.31770798563957214,
        "Close": 0.4131940007209778,
        "Volume": 20499998400
    },
    {
        "Date": "1988-01-31T00:00:00",
        "Adj Close": 0.25322210788726807,
        "Open": 0.3715279996395111,
        "High": 0.48958298563957214,
        "Low": 0.31423598527908325,
        "Close": 0.41232600808143616,
        "Volume": 16881148800
    },
    {
        "Date": "1987-01-31T00:00:00",
        "Adj Close": 0.16366153955459595,
        "Open": 0.38020798563957214,
        "High": 0.5503469705581665,
        "Low": 0.2309029996395111,
        "Close": 0.2664929926395416,
        "Volume": 23925369600
    },
    {
        "Date": "1986-02-28T00:00:00",
        "Adj Close": 0.05864088237285614,
        "Open": 0.16753500699996948,
        "High": 0.2690970003604889,
        "Low": 0.08854199945926666,
        "Close": 0.09548600018024445,
        "Volume": 9346406400
    }
];
